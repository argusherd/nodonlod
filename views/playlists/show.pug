extends ../_layout.pug

block body
  .mb-2.flex.flex-wrap.items-center.justify-between
    h1.text-xl.font-bold #{ __("Playlist") }

    button.flex.items-center.gap-1.rounded.border.px-2.py-1.font-bold.text-gray-500(
      @click=`$dispatch('confirm', {
            listener: "delete-playlist",
            message: '${__("Are you sure you want to delete this playlist?")}',
          })`,
      @delete-playlist.window="if ($event.detail) htmx.trigger($el, 'confirmed')",
      hx-delete=`/playlists/${playlist.id}`,
      hx-trigger="confirmed",
      x-data=""
    )
      i.shrink-0.text-2xl(class="icon-[material-symbols--delete-outline]")
      span #{ __("Delete") }

  .mb-2
    include _widget.pug

  .flex.flex-col.gap-2
    each item in items
      .flex.flex-col.gap-1(class="sm:flex-row sm:items-center")
        div
          input.w-10.rounded.border.p-1.text-center(
            type="text",
            value=item.order
          )
        .flex.grow.flex-col.gap-1
          - var medium = item.medium;
          - var chapter = item.chapter;
          if (chapter)
            include ../media/chapters/_widget.pug
            .flex
              .relative.w-6.shrink-0
                .absolute.right-0.top-0.rounded-bl.border-b.border-l.border-gray-300(
                  class="h-1/2 w-1/2"
                )
              include ../media/_widget.pug
          else
            include ../media/_widget.pug
