form(
  action=`/extractions/${extraction.id}/convert`,
  hx-swap="outerHTML show:none",
  hx-target="find [type='submit']",
  method="post"
)
  input(name="resourceId", type="hidden", value=rawMedium.id)
  +list
    +listItem(__("Title"))
      input.w-full.rounded-lg.border.border-gray-200.bg-white.px-5.text-gray-700(
        class="py-2.5 placeholder-gray-400/70 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300",
        name="title",
        required,
        value=rawMedium.title || ""
      )

    +listItem(__("Duration"))
      span #{ dayjs.neatDuration(rawMedium.duration) }

    +listItem(__("Upload Date"))
      span #{ dayjs(rawMedium.upload_date).format("YYYY-MM-DD") }

    +listItem(__("Uploader"))
      - var uploader = rawMedium.channel ?? rawMedium.uploader;
      - var uploaderUrl = rawMedium.channel_url ?? rawMedium.uploader_url;
      .flex.gap-4
        span.text-gray-700(class="dark:text-gray-200") #{ uploader }
        +buttonGroup
          +buttonInGroup(
            href=uploaderUrl,
            target="_blank",
            title=__("Open External Link"),
            type="button"
          )
            i.text-xl(class="icon-[gridicons--external]")
          +buttonInGroup(
            title=__("Copy Uploader's Link"),
            type="button",
            x-bind="writeText",
            x-data=`clipboard("${uploaderUrl}")`
          )
            i.text-xl(
              :class="copying ? 'icon-[material-symbols--check]' : 'icon-[ph--copy]'"
            )

    +listItem(__("Age limit"))
      input.rounded-lg.border.border-gray-200.bg-white.px-5.text-gray-700(
        class="py-2.5 placeholder-gray-400/70 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300",
        name="ageLimit",
        type="number",
        value=rawMedium.age_limit || 0
      )

    +listItem(__("Description"))
      textarea.max-h-60.min-h-20.w-full.overflow-y-auto.rounded-lg.border.border-gray-200.bg-white.p-2.text-gray-700(
        class="placeholder-gray-400/70 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300",
        name="description",
        rows="5"
      ) #{ rawMedium.description }

    +listItem(__("Thumbnail"))
      input.w-full.rounded-lg.border.border-gray-200.bg-white.px-5.text-gray-700(
        class="py-2.5 placeholder-gray-400/70 focus:border-blue-400 focus:outline-none focus:ring focus:ring-blue-300 focus:ring-opacity-40 dark:border-gray-600 dark:bg-gray-900 dark:text-gray-300 dark:focus:border-blue-300",
        name="thumbnail",
        required,
        value=rawMedium.thumbnail || ""
      )

  .flex.flex-wrap.items-center.gap-1(
    x-data=`{ thumbnail: "${rawMedium.thumbnail || ''}", show: false }`
  )
    label.w-full.cursor-pointer(class="sm:w-2/12", for=`thumbnail-${rawMedium.id}`) #{ __("Thumbnail") }
    .flex.grow.items-center.rounded.border
      input.w-full.rounded.px-2.py-1(
        id=`thumbnail-${rawMedium.id}`,
        name="thumbnail",
        type="url",
        x-model="thumbnail"
      )
      if rawMedium.thumbnails
        button.shrink-0.text-3xl(
          @click="show = !show",
          class="icon-[material-symbols--preview]",
          title=__("Preview"),
          type="button"
        )
    if rawMedium.thumbnail
      div(x-show="show")
        img.m-auto(:src="thumbnail", alt="preview")
        .flex.flex-wrap.justify-center
          each thumbnail in rawMedium.thumbnails
            div(class="w-4/12 sm:w-1/12")
              img.h-full.w-full.cursor-pointer.object-cover(
                @click=`thumbnail = '${thumbnail.url}'`,
                alt="candidate",
                src=thumbnail.url
              )

  button.ml-auto.rounded.border.px-2.py-1(
    title=__("Convert extracted infomation to playable media"),
    type="submit"
  ) #{ __("Convert") }
