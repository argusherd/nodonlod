extends ../_layout.pug

block body
  h2 #{ playable.title }
  a(href=playable.url) url
  p #{ playable.description }
  span #{ dayjs.duration(playable.duration, "seconds").format("HH:mm:ss") }
  span #{ playable.uploadDate ? dayjs(playable.uploadDate).format("YYYY-MM-DD") : "" }
  span #{ dayjs(playable.createdAt).format("YYYY-MM-DD HH:mm:ss") }
  span #{ dayjs(playable.updatedAt).format("YYYY-MM-DD HH:mm:ss") }
  img(src=playable.thumbnail)
  if uploader
    a(href=uploader.url) #{ uploader.name }

  each chapter in chapters
    div
      a(href=`/chapters/${chapter.id}/play`, hx-swap="none") #{ chapter.title }
      - var startAt = chapter.startTime ? dayjs.duration(chapter.startTime, "seconds").format("HH:mm:ss") : "";
      - var endAt = chapter.endTime ? dayjs.duration(chapter.endTime, "seconds").format("HH:mm:ss") : "";
      span #{ startAt }
      span #{ endAt }

  each tag in tags
    span #{ tag.name }

  each playlist in playlists
    div
      a(href=`/playlists/${playlist.id}`) #{ playlist.title }
